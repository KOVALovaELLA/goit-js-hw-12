{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nconst apiKey = \"41764159-4dbb46db2acf8e3f55eb7fe99\";\n\nconst formEl = document.querySelector(\"form\");\nconst searchInputEl = document.getElementById(\"search-input\");\nconst searchResultsEl = document.querySelector(\".search-results\");\nconst loadMoreButtonEl = document.getElementById(\"load-more-button\");\nconst loaderEl = document.getElementById(\"loader\");\n\nlet inputData = \"\";\nlet page = 1;\nlet lightbox;\nlet totalHits = 0;\n\nfunction showLoader() {\n  loaderEl.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loaderEl.style.display = \"none\";\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButtonEl.style.display = \"block\";\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButtonEl.style.display = \"none\";\n}\n\nfunction clearGallery() {\n  searchResultsEl.innerHTML = \"\";\n}\n\nfunction createImageCard(imageData) {\n  const imageWrapper = document.createElement(\"a\");\n  imageWrapper.href = imageData.largeImageURL;\n  imageWrapper.classList.add(\"search-result\");\n\n  const image = document.createElement(\"img\");\n  image.src = imageData.webformatURL;\n  image.alt = imageData.tags;\n\n  const likes = document.createElement(\"p\");\n  likes.textContent = `Likes: ${imageData.likes}`;\n\n  const views = document.createElement(\"p\");\n  views.textContent = `Views: ${imageData.views}`;\n\n  const comments = document.createElement(\"p\");\n  comments.textContent = `Comments: ${imageData.comments}`;\n\n  const downloads = document.createElement(\"p\");\n  downloads.textContent = `Downloads: ${imageData.downloads}`;\n\n  imageWrapper.appendChild(image);\n  imageWrapper.appendChild(likes);\n  imageWrapper.appendChild(views);\n  imageWrapper.appendChild(comments);\n  imageWrapper.appendChild(downloads);\n\n  return imageWrapper;\n}\n\n// Отримати висоту однієї карточки галереї\nfunction getGalleryCardHeight() {\n  const galleryCard = document.querySelector(\".search-result\");\n  const cardRect = galleryCard.getBoundingClientRect();\n  return cardRect.height;\n}\n\n// Плавна прокрутка сторінки\nfunction smoothScrollBy(cardHeight) {\n  const scrollAmount = cardHeight * 2; // Прокрутити сторінку на дві висоти карточки галереї\n  window.scrollBy({\n    top: scrollAmount,\n    left: 0,\n    behavior: \"smooth\",\n  });\n}\n\nasync function searchImages() {\n  showLoader();\n  inputData = searchInputEl.value;\n  clearGallery();\n\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${inputData}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    appendImagesToGallery(data.hits);\n    showLoadMoreButton();\n    checkEndOfCollection();\n  } catch (error) {\n    console.error(\"Error processing request:\", error.message);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction appendImagesToGallery(results) {\n  results.forEach((result) => {\n    const imageCard = createImageCard(result);\n    searchResultsEl.appendChild(imageCard);\n  });\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".search-results a\", {});\n  } else {\n    lightbox.refresh();\n  }\n}\n\nasync function loadMoreImages() {\n  showLoader();\n  page++;\n\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${inputData}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: \"\",\n        message: \"No more images available.\",\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    appendImagesToGallery(data.hits);\n    checkEndOfCollection();\n\n    // Отримати висоту карточки галереї та викликати плавну прокрутку\n    const cardHeight = getGalleryCardHeight();\n    smoothScrollBy(cardHeight);\n  } catch (error) {\n    console.error(\"Error loading more images:\", error.message);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction checkEndOfCollection() {\n  if (page * 40 >= totalHits) {\n    hideLoadMoreButton();\n    iziToast.info({\n      title: \"\",\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n\nformEl.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  page = 1;\n  inputData = searchInputEl.value;\n  clearGallery();\n  searchImages();\n});\n\nloadMoreButtonEl.addEventListener(\"click\", loadMoreImages);\n"],"names":["apiKey","formEl","searchInputEl","searchResultsEl","loadMoreButtonEl","loaderEl","inputData","page","lightbox","totalHits","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","clearGallery","createImageCard","imageData","imageWrapper","image","likes","views","comments","downloads","getGalleryCardHeight","smoothScrollBy","cardHeight","scrollAmount","searchImages","url","data","axios","iziToast","appendImagesToGallery","checkEndOfCollection","error","results","result","imageCard","SimpleLightbox","loadMoreImages","event"],"mappings":"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"}